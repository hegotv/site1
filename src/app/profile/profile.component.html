<!-- Usa un contenitore ng-container per evitare elementi extra nel DOM -->
<ng-container *ngIf="userProfile">
  <main>
    <div class="column">
      <!-- 
        SUGGERIMENTO 5: Gestione dinamica dell'immagine.
        Usa la foto profilo se esiste, altrimenti usa quella di default.
        onError gestisce il caso in cui l'URL della foto sia rotto.
      -->
      <img
        [src]="defaultPhotoUrl"
        (error)="onImageError($event)"
        alt="Foto profilo di {{ userProfile.first_name }} {{
          userProfile.last_name
        }}"
        class="profile-photo"
      />

      <h1>
        {{ userProfile.first_name || "Utente" }}
        {{ userProfile.last_name || "" }}
      </h1>
      <h2>{{ userProfile.email }}</h2>

      <div class="button-group">
        <button class="btn settings-btn" (click)="openSettings()">
          <mat-icon>settings</mat-icon> IMPOSTAZIONI
        </button>
        <button class="btn logout-btn" (click)="Logout()">
          <mat-icon>logout</mat-icon> LOG OUT
        </button>
      </div>
    </div>

    <!-- 
      SUGGERIMENTO 6 (UX): Mostra le impostazioni come un overlay 
      per un'esperienza piÃ¹ fluida.
    -->
    <div class="settings-overlay" *ngIf="showSettings">
      <app-settings (closeSettings)="showSettings = false"></app-settings>
    </div>
  </main>
</ng-container>
