<main class="podcast-page-container">
  <!-- ================================================================= -->
  <!-- SKELETON LOADING (VISIBILE DURANTE IL CARICAMENTO)                -->
  <!-- ================================================================= -->
  @if (isLoading) {
  <div class="skeleton-container fade-out">
    <!-- Skeleton Section 1 (Simula una riga di podcast) -->
    <div class="skeleton-section">
      <div class="skeleton-title skeleton-box"></div>
      <div class="skeleton-row">
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box mobile-hidden"></div>
      </div>
    </div>

    <!-- Skeleton Section 2 -->
    <div class="skeleton-section">
      <div class="skeleton-title skeleton-box"></div>
      <div class="skeleton-row">
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box mobile-hidden"></div>
      </div>
    </div>
  </div>
  } @else {

  <!-- ================================================================= -->
  <!-- CONTENUTO PRINCIPALE (VISIBILE DOPO IL CARICAMENTO)               -->
  <!-- ================================================================= -->
  <div class="fade-in">
    <!-- Ciclo principale sulle SEZIONI -->
    @for (section of podcastSections; track section.id) {
    <app-slider
      [sectionTitle]="section.title"
      [items]="section.seasons"
      [itemTemplate]="seasonCardTemplate"
      (slideClick)="handleSeasonClick($event)"
    ></app-slider>
    } @empty {
    <p class="no-content-message">Nessun contenuto disponibile.</p>
    }
  </div>
  }
</main>

<!-- Template Card (INVARIATO) -->
<ng-template #seasonCardTemplate let-season>
  <div
    class="season-card"
    [class.clickable]="season.episodes && season.episodes.length > 0"
    [attr.aria-label]="'Vedi tutti gli episodi di ' + season.title"
  >
    <div class="season-thumbnail-container">
      @if (season.episodes && season.episodes.length > 0) {
      <img
        [src]="season.artwork_image"
        alt="Copertina di {{ season.title }}"
        class="season-thumbnail"
      />
      } @else {
      <div class="thumbnail-placeholder">
        <i class="fas fa-podcast"></i>
      </div>
      }
      <div class="play-overlay">
        <i class="fas fa-play"></i>
      </div>
    </div>
    <div class="season-info">
      <h4 class="season-title">{{ season.title }}</h4>
      @if (season.episodes && season.episodes.length > 0) {
      <p class="season-author">{{ season.episodes[0].speaker }}</p>
      }
    </div>
  </div>
</ng-template>

<app-footer *ngIf="!isLoading"></app-footer>
