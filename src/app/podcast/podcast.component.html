<main class="podcast-page-container">
  <!-- ================================================================= -->
  <!-- SKELETON LOADING (VISIBILE DURANTE IL CARICAMENTO)                -->
  <!-- ================================================================= -->
  @if (isLoading) {
    <div class="skeleton-container fade-out">
      <!-- Intestazione Finta -->
      <div class="all-shows-header">
        <div class="skeleton-title skeleton-box"></div>
      </div>

      <!-- Griglia Skeleton (Speculare alla griglia reale) -->
      <div class="category-grid skeleton-grid-override">
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
        <div class="skeleton-card skeleton-box"></div>
      </div>
    </div>
  } @else {
    <!-- ================================================================= -->
    <!-- CONTENUTO PRINCIPALE (VISIBILE DOPO IL CARICAMENTO)               -->
    <!-- ================================================================= -->
    <div class="fade-in all-shows-container">
      <!-- Iteriamo sulle sezioni (es. "Ultime Uscite", "Popolari") -->
      @for (section of podcastSections; track section.id) {
        <section class="podcast-section-wrapper">
          <!-- Intestazione Sezione -->
          <div class="all-shows-header">
            <h1 class="section-title">{{ section.title }}</h1>
          </div>

          <!-- Griglia (Sostituisce lo slider) -->
          <div class="category-grid">
            @for (season of section.seasons; track season.id) {
              <div
                class="category-grid-item"
                (click)="handleSeasonClick(season)"
                [attr.aria-label]="'Vedi ' + season.title"
              >
                <!-- Immagine a tutto schermo -->
                @if (season.artwork_image) {
                  <img [src]="season.artwork_image" [alt]="season.title" />
                } @else {
                  <!-- Placeholder se manca l'immagine -->
                  <div class="placeholder-img">
                    <i class="fas fa-podcast"></i>
                  </div>
                }

                <!-- Contenuto in Overlay (Stile All Shows) -->
                <div class="category-grid-item-content">
                  <h3>{{ season.title }}</h3>
                  <p class="season-author">
                    {{ season.episodes?.[0]?.speaker || "Autore Sconosciuto" }}
                  </p>
                </div>
              </div>
            }
          </div>
        </section>
      } @empty {
        <div class="no-content-message">
          <p>Nessun podcast disponibile al momento.</p>
        </div>
      }
    </div>
  }
</main>

<app-footer *ngIf="!isLoading"></app-footer>
